<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoverMatch Workflow SOP (Detailed)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tool-tag {
            display: inline-block;
            background-color: #e0e7ff; /* indigo-100 */
            color: #4338ca; /* indigo-800 */
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            border: 1px solid #c7d2fe; /* indigo-200 */
            margin-top: 0.5rem;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .tab-button.active {
            background-color: #ffffff;
            color: #1e3a8a; /* blue-900 */
            border-color: #3b82f6; /* blue-500 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-button:not(.active) {
            background-color: #f1f5f9; /* slate-100 */
            color: #475569; /* slate-600 */
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        code {
            background-color: #f1f5f9; /* slate-100 */
            color: #dc2626; /* red-600 */
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 sm:p-8">
        <!-- Header Section -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 leading-tight">
                üöÄ Mastering the <span class="text-blue-600">MoverMatch</span> Flow
            </h1>
            <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">
                Your complete guide to the automated client matching process. Select your view below.
            </p>
        </header>

        <!-- Tab Navigation -->
        <div class="mb-8 flex justify-center space-x-4">
            <button id="btn-user-sop" class="tab-button active">User SOP</button>
            <button id="btn-tech-dive" class="tab-button">Technical Deep Dive</button>
        </div>

        <!-- Tab Content -->
        <div id="tab-content-wrapper">
            <!-- USER SOP VIEW -->
            <div id="user-sop" class="tab-content active">
                <section class="mb-16">
                    <h2 class="text-2xl font-bold text-center mb-8 text-slate-900">Meet the Players & Your Role</h2>
                    <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200 flex flex-col">
                            <div class="flex items-center"><div class="bg-blue-100 text-blue-600 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="ml-4"><h3 class="text-xl font-bold text-slate-900">Onboarding Specialist (OS)</h3><p class="text-blue-700 font-semibold">The Welcomer</p></div></div>
                            <p class="mt-4 text-slate-600 flex-grow">Focus on <code>Qualified</code> leads who have <strong>booked a VA interview</strong>. Your job is to provide a seamless transition from lead to active client.</p>
                            <div class="mt-4 pt-4 border-t border-slate-200"><h4 class="font-semibold text-slate-700">Your Salesforce Hub:</h4><p class="text-sm text-slate-600">You'll work primarily on the <code>Lead</code> record to convert it into an <code>Opportunity</code>.</p></div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200 flex flex-col">
                            <div class="flex items-center"><div class="bg-amber-100 text-amber-600 p-3 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 3v10m6-10v10"></path></svg></div><div class="ml-4"><h3 class="text-xl font-bold text-slate-900">BDR (MoverGuide)</h3><p class="text-amber-700 font-semibold">The Guide & Rescuer</p></div></div>
                            <p class="mt-4 text-slate-600 flex-grow">Focus on clients who need personal help or fall out of the automated path. Your job is to engage, solve problems, and nurture leads toward qualification.</p>
                            <div class="mt-4 pt-4 border-t border-slate-200"><h4 class="font-semibold text-slate-700">Your Salesforce Hub:</h4><p class="text-sm text-slate-600">You'll monitor the <code>Lead</code> object and dive into the related <code>Talent_Profile__c</code> for context.</p></div>
                        </div>
                    </div>
                </section>
                <section class="mb-16">
                    <h2 class="text-2xl font-bold text-center mb-4 text-slate-900">The Automated Journey ü§ñ</h2><p class="text-center text-slate-600 mb-10">This is what happens in seconds, before the lead ever gets to you.</p>
                    <div class="grid md:grid-cols-4 gap-6 text-center">
                        <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center"><div class="bg-slate-200 text-slate-600 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">1</div><h3 class="font-bold mt-3 mb-1">Client Submits Profile</h3><p class="text-sm text-slate-600 px-2 flex-grow">A client fills out a form with their needs and contact info.</p><div class="tool-tag">Powered by: JotForm</div></div>
                        <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center"><div class="bg-slate-200 text-slate-600 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">2</div><h3 class="font-bold mt-3 mb-1">Salesforce Works Its Magic</h3><p class="text-sm text-slate-600 px-2 flex-grow">Creates records, maps data, scores, and selects the Top 2-3 VA matches.</p><div class="tool-tag">Powered by: Salesforce Flow</div></div>
                        <div class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col items-center"><div class="bg-slate-200 text-slate-600 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">3</div><h3 class="font-bold mt-3 mb-1">"Top 3 Matches" Email</h3><p class="text-sm text-slate-600 px-2 flex-grow">Client receives an email with VA matches and Calendly booking links.</p><div class="tool-tag">Powered by: Email Automation</div></div>
                        <div class="bg-white p-4 rounded-lg border border-green-300 shadow-sm flex flex-col items-center"><div class="bg-green-200 text-green-800 rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">4</div><h3 class="font-bold mt-3 mb-1 text-green-800">Client Books Interview!</h3><p class="text-sm text-slate-600 px-2 flex-grow">The client books a time. This is the "Happy Path" handoff trigger.</p><div class="tool-tag">Powered by: Calendly Webhook</div></div>
                    </div>
                </section>
                <section class="mb-16 bg-slate-900 text-white rounded-2xl p-8 md:p-12">
                    <h2 class="text-3xl font-bold text-center mb-2">üü° YOUR CUE! The Critical Handoffs üü°</h2><p class="text-center text-slate-300 mb-10">This is when automation stops and you step in. Know your trigger and the data behind it!</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-blue-600/50 p-6 rounded-xl border border-blue-400">
                            <h3 class="text-xl font-bold text-white mb-2">Onboarding Specialist (OS) Cue üßë‚ÄçüöÄ</h3>
                            <div class="text-blue-200 mb-4"><p class="font-semibold text-white">TRIGGER:</p> A <code>Lead.Status</code> is set to <strong class="bg-white text-blue-700 px-2 py-1 rounded-md">"Qualified"</strong>.<p class="text-sm mt-1">(This happens automatically when a <code>Talent_Profile__c.Status</code> becomes 'Converted - Intro Call Booked'.)</p></div>
                            <div class="bg-slate-800 p-4 rounded-lg"><p class="font-semibold mb-2 text-white">YOUR ACTION PLAN:</p><ul class="list-disc list-inside text-blue-200 space-y-1"><li><strong>Review</strong> the <code>Lead</code> and <code>Talent Profile</code>.</li><li><strong>Manually Convert</strong> the <code>Lead</code> to an <code>Opportunity</code>.</li><li><strong>Initiate</strong> onboarding via the screen flow.</li></ul><div class="tool-tag !bg-blue-200 !text-blue-800 !border-blue-300 mt-3">Notification Powered by: Salesforce</div></div>
                        </div>
                        <div class="bg-amber-600/50 p-6 rounded-xl border border-amber-400">
                            <h3 class="text-xl font-bold text-white mb-2">BDR (MoverGuide) Cue üß≠</h3>
                            <p class="text-amber-200 mb-4"><strong class="text-white">TRIGGER:</strong> You get a notification because a <code>Talent_Profile__c.Status</code> is updated to one of the following:</p>
                            <div class="bg-slate-800 p-4 rounded-lg"><ul class="list-none text-amber-200 space-y-2"><li><strong class="bg-amber-200 text-amber-900 px-2 py-1 rounded-md">MoverGuide Requested</strong></li><li><strong class="bg-amber-200 text-amber-900 px-2 py-1 rounded-md">No Match Found</strong></li><li><strong class="bg-amber-200 text-amber-900 px-2 py-1 rounded-md">Unresponsive 24h</strong></li><li><strong class="bg-amber-200 text-amber-900 px-2 py-1 rounded-md">Intro Call Canceled</strong></li></ul><div class="tool-tag !bg-amber-200 !text-amber-800 !border-amber-300 mt-3">Notification Powered by: Zapier ‚Üí Distro Chat</div></div>
                        </div>
                    </div>
                </section>
                 <section>
                    <h2 class="text-2xl font-bold text-center mb-8 text-slate-900">üî¥ The BDR Playbook: Handling Exception Statuses üî¥</h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><p class="font-bold text-slate-800">IF status is "MoverGuide Requested":</p><p class="mt-2 text-sm text-slate-600"><strong>THEN...</strong> They want expert help! Your goal is discovery and manual qualification in your scheduled call.</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><p class="font-bold text-slate-800">IF status is "No Match Found":</p><p class="mt-2 text-sm text-slate-600"><strong>THEN...</strong> They're a good prospect with specific needs. Review their profile and reach out to help them manually.</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><p class="font-bold text-slate-800">IF status is "Unresponsive 24h":</p><p class="mt-2 text-sm text-slate-600"><strong>THEN...</strong> Automated emails (Initial + 12hr Reminder) didn't work. Your personal touch can make the difference.</p></div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><p class="font-bold text-slate-800">IF status is "Intro Call Canceled":</p><p class="mt-2 text-sm text-slate-600"><strong>THEN...</strong> Something created hesitation. Reach out immediately to understand why and offer assistance.</p></div>
                    </div>
                </section>
            </div>

            <!-- TECHNICAL DEEP DIVE VIEW -->
            <div id="tech-deep-dive" class="tab-content">
                <div class="space-y-8">
                    <!-- Step 1: Intake -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">Step 1: Intake (Jotform ‚Üí Salesforce)</h3>
                        <dl class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div><dt class="font-semibold">Object(s)</dt><dd class="text-slate-600"><code>Lead</code>, <code>Talent_Profile__c</code></dd></div>
                            <div><dt class="font-semibold">Automation Type</dt><dd class="text-slate-600">External Form Submission</dd></div>
                            <div><dt class="font-semibold">Purpose</dt><dd class="text-slate-600">Create Lead & Talent Profile records from Jotform.</dd></div>
                        </dl>
                        <div class="mt-4 pt-4 border-t border-slate-200">
                            <h4 class="font-semibold mb-2">System Behavior:</h4>
                            <ul class="list-disc list-inside text-slate-600 space-y-2 text-sm">
                                <li><b>Trigger:</b> Client submits Jotform with <code>Lead Path</code> as 'MoverMatch' or 'MoverGuide'.</li>
                                <li><b>Branch A (MoverMatch):</b> Handled by Salesforce Flows. Creates <code>Talent_Profile__c</code> and triggers downstream mapping/scoring.</li>
                                <li><b>Branch B (MoverGuide):</b> Handled by Zapier. Captures Lead details and sends a formatted message to a ChatSpace for BDR assignment.</li>
                                <li><b>Error Handling:</b> Salesforce validation rules and Zapier error logs ensure data integrity and notify admins of failures.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Step 2: Auto Field Mapping -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">Step 2: Auto Field Mapping (Record-Triggered Flows)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold">Flow: <code>Lead-auto map movermatch fields-[FU]</code></h4>
                                <dl class="mt-2 text-sm space-y-2">
                                    <div><dt class="font-semibold">Object:</dt><dd class="text-slate-600"><code>Lead</code> (Before Save)</dd></div>
                                    <div><dt class="font-semibold">Actions:</dt><dd class="text-slate-600">Sets <code>Sub Industry</code> and <code>Type of Practice (Business)</code> from Lead's MoverMatch role fields.</dd></div>
                                </dl>
                            </div>
                            <div>
                                <h4 class="font-semibold">Flow: <code>Talent profile-map movermatch fields-[FU]</code></h4>
                                <dl class="mt-2 text-sm space-y-2">
                                    <div><dt class="font-semibold">Object:</dt><dd class="text-slate-600"><code>Talent_Profile__c</code> (Before Save)</dd></div>
                                    <div><dt class="font-semibold">Actions:</dt><dd class="text-slate-600">Sets TP fields from MoverMatch roles and dynamically generates the TP Name.</dd></div>
                                </dl>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3 & 4: Matching -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">Step 3 & 4: VA Matching (Apex Trigger & Controller)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold">Handler: <code>TalentProfileTriggerHandler</code> (Apex)</h4>
                                <dl class="mt-2 text-sm space-y-2">
                                    <div><dt class="font-semibold">Trigger</dt><dd class="text-slate-600">After Insert/Update on <code>Talent_Profile__c</code>.</dd></div>
                                    <div><dt class="font-semibold">Logic</dt><dd class="text-slate-600">On insert, calls direct match for single records, batch for bulk. On update, if status is 'Re-run Match Now', it re-runs the logic.</dd></div>
                                    <div><dt class="font-semibold">Action</dt><dd class="text-slate-600">Calls <code>MoverScoreCardController</code> or <code>MoverMatchBatchProcessor</code>.</dd></div>
                                </dl>
                            </div>
                            <div>
                                <h4 class="font-semibold">Controller: <code>MoverScoreCardController</code></h4>
                                <p class="text-sm text-slate-600 mb-2">Calculates and selects top-matching VAs.</p>
                                <h5 class="font-semibold text-sm">Eligibility Filters:</h5>
                                <ul class="list-disc list-inside text-slate-600 space-y-1 text-sm">
                                    <li>VA Status is 'Waitlisted' & Training Status is 'Graduate'.</li>
                                    <li>Recommended Role matches TP Sub Industry.</li>
                                    <li>Frequency cap not reached.</li>
                                </ul>
                                <h5 class="font-semibold text-sm mt-2">Output:</h5>
                                 <p class="text-sm text-slate-600">Creates 2-3 <code>Match_Score__c</code> records for scores ‚â• 75.</p>
                            </div>
                        </div>
                         <div class="mt-4 pt-4 border-t border-slate-200">
                            <h4 class="font-semibold mb-2">Scoring Breakdown:</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left">
                                    <thead class="bg-slate-100"><tr class="text-slate-600"><th class="p-2">Component</th><th class="p-2">Weight</th></tr></thead>
                                    <tbody class="divide-y divide-slate-200">
                                        <tr><td class="p-2">Skill Match</td><td class="p-2">50%</td></tr>
                                        <tr><td class="p-2">Core Competency Match</td><td class="p-2">15%</td></tr>
                                        <tr><td class="p-2">Tech Proficiency Match (VOIP/EMR)</td><td class="p-2">15%</td></tr>
                                        <tr><td class="p-2">Specialization Match</td><td class="p-2">10%</td></tr>
                                        <tr><td class="p-2">Experience Level Match</td><td class="p-2">5%</td></tr>
                                        <tr><td class="p-2">Willingness to Learn Score</td><td class="p-2">5%</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                     <!-- Step 5 & 6 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                            <h3 class="text-xl font-bold text-slate-800 mb-4">Step 5: Post-Match Actions</h3>
                            <p class="text-sm text-slate-600 mb-2">Handled by <code>TalentProfileTriggerHandler</code> after matching completes.</p>
                             <ul class="list-disc list-inside text-slate-600 space-y-2 text-sm">
                                <li><b>On Match Success (score ‚â• 75):</b>
                                    <ul class="list-['-_'] list-inside pl-4">
                                        <li>Set TP Status ‚Üí 'Awaiting Client Response'.</li>
                                        <li>Send 'Mover_Match' email template to client.</li>
                                        <li>Increment match count on VA Scorecard.</li>
                                    </ul>
                                </li>
                                <li><b>On Match Failure:</b>
                                    <ul class="list-['-_'] list-inside pl-4">
                                        <li>Set TP Status ‚Üí 'No Match Found'.</li>
                                        <li>Flag TP for BDR notification.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                            <h3 class="text-xl font-bold text-slate-800 mb-4">Step 6: Calendly Booking Handling</h3>
                            <p class="text-sm text-slate-600 mb-2">Triggered by new records on <code>Calendly__CalendlyAction__c</code>.</p>
                             <ul class="list-disc list-inside text-slate-600 space-y-2 text-sm">
                                <li><b>Flow: 'MoverMatch Intro Call is Booked'</b>
                                    <ul class="list-['-_'] list-inside pl-4">
                                        <li><b>On Create:</b> Finds TP, sets Intro Call Date, and updates TP Status to 'Converted - Intro Call Booked' or 'Rescheduled'.</li>
                                    </ul>
                                </li>
                                <li><b>Flow: 'MoverMatch Intro Call is...Cancelled'</b>
                                    <ul class="list-['-_'] list-inside pl-4">
                                       <li><b>On Cancel:</b> Finds TP, clears Intro Call Date, and sets TP Status to 'Converted - Intro Call Canceled'.</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Step 7: Frequency Cap Reset -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">Step 7: Frequency Cap Reset (Admin/Batch)</h3>
                        <dl class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div><dt class="font-semibold">Batch Class</dt><dd class="text-slate-600"><code>MoverFrequencyCapResetBatch</code></dd></div>
                            <div><dt class="font-semibold">Schedule</dt><dd class="text-slate-600">Runs weekly (e.g., Sunday 00:00 UTC).</dd></div>
                            <div><dt class="font-semibold">Action</dt><dd class="text-slate-600">Resets <code>VA_of_Ongoing_Match_USC__c</code> to 0 on all relevant VAs.</dd></div>
                        </dl>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // JavaScript for tab functionality
        const userSopButton = document.getElementById('btn-user-sop');
        const techDiveButton = document.getElementById('btn-tech-dive');
        const userSopContent = document.getElementById('user-sop');
        const techDiveContent = document.getElementById('tech-deep-dive');

        function switchTabs(activeButton, inactiveButton, activeContent, inactiveContent) {
            activeButton.classList.add('active');
            inactiveButton.classList.remove('active');
            activeContent.classList.add('active');
            inactiveContent.classList.remove('active');
        }

        userSopButton.addEventListener('click', () => {
            switchTabs(userSopButton, techDiveButton, userSopContent, techDiveContent);
        });

        techDiveButton.addEventListener('click', () => {
            switchTabs(techDiveButton, userSopButton, techDiveContent, userSopContent);
        });
    </script>
</body>
</html>
